<div class="mood-widget">
    <h3>Jak se dnes c칤t칤코?</h3>

    <div class="slider-row">
        <span class="emoji">游땨</span>
        <input type="range" min="0" max="4" step="1" value="2" id="moodSlider">
        <span class="emoji">游땏</span>
    </div>

    <div class="selected-mood">
        Vybran치 n치lada: <span id="currentMood">游땛</span>
    </div>

    <button id="saveBtn">Ulo쬴t n치ladu</button>
</div>

<script>
    const s = moodSlider,
        m = currentMood,
        b = saveBtn,
        E = ["游땨", "游땟", "游땛", "游뗵", "游땏"],
        K = "moodHistory",
        d = new Date().toISOString().slice(0, 10),
        h = JSON.parse(localStorage.getItem(K)) || {};

    s.oninput = () => m.textContent = E[s.value];

    const lock = v => (
        s.value = v,
        m.textContent = E[v],
        s.disabled = b.disabled = true,
        b.textContent = "Dne코n칤 n치lada ulo쬰na"
    );

    if (h[d] != null) lock(h[d]);
    else b.onclick = () => (
        h[d] = +s.value,
        localStorage.setItem(K, JSON.stringify(h)),
        lock(h[d]),
        render()
    );

    function render() {
        let x = moodHistory;
        if (!x && !Object.keys(h).length) return;
        if (!x) {
            x = document.createElement("div");
            x.id = "moodHistory";
            x.style.marginTop = "12px";
            document.querySelector(".mood-widget").appendChild(x);
        }
        x.innerHTML = "<strong>Historie:</strong><br>" +
            Object.entries(h)
                .sort((a, b) => b[0].localeCompare(a[0]))
                .map(([d, v]) => `${d}: ${E[v]}`)
                .join("<br>");
    }

    render();
</script>
<style>
    :root {
        --primary: #4a4a8a;
        --primary-dark: #2e2e6a;
        --bg: #f0f0ff;
        --border-radius: 12px;
    }

    body {
        font-family: Arial, sans-serif;
    }

    .mood-widget {
        width: 280px;
        padding: 16px;
        border: 2px solid var(--primary);
        border-radius: var(--border-radius);
        background: var(--bg);
        text-align: center;
        color: #333;
    }

    .mood-widget h3 {
        margin-bottom: 12px;
    }

    .slider-row {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 12px;
    }

    .emoji {
        font-size: 24px;
    }

    input[type="range"] {
        flex: 1;
        appearance: none;
        height: 8px;
        border-radius: 4px;
        background: #cfcfff;
        outline: none;
    }

    input[type="range"]::-webkit-slider-thumb,
    input[type="range"]::-moz-range-thumb {
        width: 26px;
        height: 26px;
        border-radius: 50%;
        background: var(--primary);
        cursor: pointer;
    }

    .selected-mood {
        margin-bottom: 12px;
    }

    button {
        padding: 8px 14px;
        border: none;
        border-radius: 8px;
        background: var(--primary);
        color: white;
        font-size: 14px;
        cursor: pointer;
    }

    button:hover:not(:disabled) {
        background: var(--primary-dark);
    }

    button:disabled {
        background: #aaa;
        cursor: not-allowed;
    }
</style>